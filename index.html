<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>صفحة تجريبية — منع النسخ (مع مسار معوّج)</title>
  <style>
    :root{--sidebar-width:320px}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans Arabic',sans-serif}
    body{display:flex;direction:rtl}

    /* الشريط الأيسر */
    #sidebar{width:var(--sidebar-width);background:#0f172a;color:#e6eef8;padding:18px;box-sizing:border-box;position:fixed;left:0;top:0;bottom:0;overflow:hidden}
    #content{margin-right:var(--sidebar-width);flex:1;height:100vh}

    h1{font-size:16px;margin:6px 0}
    .dynamic{text-align:right;font-size:15px;line-height:1.4;user-select:none}

    /* منعه التحديد */
    *{ -webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none }

    iframe{border:0;width:100%;height:100vh}

    .controls{margin-top:12px;display:flex;gap:8px}
    button{background:#1f2937;color:#fff;border:0;padding:8px 10px;border-radius:8px;cursor:pointer}
    button.tiny{padding:6px 8px;font-size:13px}

    /* شريط عنوان زائف داخل الصفحة ليُخفي المجال الحقيقي */
    .fake-address{background:#e5e7eb;color:#0b1220;padding:8px;border-radius:8px;display:flex;align-items:center;gap:8px;margin-top:10px}
    .fake-address .dot{width:10px;height:10px;border-radius:50%;background:#6b7280}
    .fake-address .text{font-family:monospace;direction:ltr;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}

    /* طبقة شفافة فوق النص لمنع السحب */
    .overlay{position:absolute;inset:0;pointer-events:auto}
  </style>
</head>
<body>
  <aside id="sidebar">
    <h1>الشريط الأيسر</h1>
    <div id="dynamicBox" class="dynamic" aria-live="polite">جاري التشغيل...</div>

    <div class="fake-address" title="شريط عنوان زائف — لا يتحكم في المتصفح">
      <div class="dot"></div>
      <div id="fakeAddrText" class="text">https://alpop-golem-code.vercel.app/</div>
    </div>

    <div class="controls">
      <button id="toggleAddr">تفعيل/إيقاف تشويش العنوان</button>
      <button id="openUrl">افتح الموقع الرسمي</button>
    </div>

    <p style="font-size:12px;color:#9aa4b2;margin-top:12px">ملاحظة: الصفحة لا تستطيع تغيير اسم النطاق (domain) المعروض في شريط المتصفح. يمكننا تغيير **المسار** فقط، وصنع شريط عنوان داخل الصفحة يظهر أي نص لنخدع الزوار السطحيين.</p>
  </aside>

  <main id="content">
    <iframe id="targetFrame" src="https://alpop-golem-code.vercel.app/"></iframe>
  </main>

  <script>
    // ======= تحذير فني بسيط =======
    // لا يمكن لموقع ويب تغيير الدومين في شريط المتصفح (مثلاً "alpop-golem-code.vercel.app").
    // ما يمكننا عمله:
    // 1) تغيير المسار/استعلام URL داخل نفس الدومين باستخدام history.replaceState/pushState.
    // 2) عرض "شريط عنوان زائف" داخل الصفحة يَعرض أي نص نريده (لكن المتصفح لا يزال يظهر الدومين الحقيقي).
    // 3) تشويش المسار باستمرار لإرباك نسخ الرابط السريع.

    const fakeEl = document.getElementById('fakeAddrText');
    const toggleBtn = document.getElementById('toggleAddr');
    const openBtn = document.getElementById('openUrl');
    const frame = document.getElementById('targetFrame');

    // توليد نص عشوائي
    function randStr(len){
      const chars = 'abcdefghijklmnopqrstuvwxyz0123456789-_/';
      let s = '';
      for(let i=0;i<len;i++) s += chars.charAt(Math.floor(Math.random()*chars.length));
      return s;
    }

    // تغيير المسار في شريط المتصفح (لا يغير الدومين)
    let addrInterval = null;
    let addrRunning = true; // بدءًا مفعل

    function startAddrChaos(){
      if(addrInterval) clearInterval(addrInterval);
      addrInterval = setInterval(()=>{
        // نولّد جزء مسار عشوائي ونستبدل المسار في العنوان
        const randomPart = randStr(20);
        const newPath = '/' + randomPart;
        try{
          // يغيّر المسار المعروض في شريط المتصفح (نفس الدومين)
          history.replaceState(null, '', newPath);
        }catch(e){}
        // نحدّث الشريط الزائف داخل الصفحة ليتطابق مع مسار مشوش
        fakeEl.textContent = window.location.origin + newPath;
      }, 120); // سرعة—خفيفة جدا قد تُعيق المستخدم؛ يمكن تعديلها
    }

    function stopAddrChaos(){
      if(addrInterval) clearInterval(addrInterval); addrInterval = null;
      // إعادة العنوان لحالته الطبيعية (مسار فارغ)
      try{ history.replaceState(null,'','/'); }catch(e){}
      fakeEl.textContent = 'https://alpop-golem-code.vercel.app/';
    }

    // زر تبديل
    toggleBtn.addEventListener('click', ()=>{
      addrRunning = !addrRunning;
      if(addrRunning) startAddrChaos(); else stopAddrChaos();
      toggleBtn.textContent = addrRunning ? 'إيقاف تشويش العنوان' : 'تفعيل تشويش العنوان';
    });

    // زر فتح الموقع
    openBtn.addEventListener('click', ()=>{ window.open('https://alpop-golem-code.vercel.app/','_blank'); frame.focus(); });

    // بدء تلقائي
    startAddrChaos();

    // نص متغير في الشريط الأيسر (إضافي)
    const phrases = ['نص متغير','تشويش لمنع النسخ','جرب تحديد النص','ALPOP — تجربة'];
    const box = document.getElementById('dynamicBox');
    setInterval(()=>{ box.textContent = phrases[Math.floor(Math.random()*phrases.length)] + ' ' + randStr(6); }, 300);

    // منع استخدام الاختصارات ونسخ الحافظة كما قبل
    document.addEventListener('copy', e=>{ e.preventDefault(); try{ e.clipboardData.setData('text/plain',''); }catch(err){} });
    document.addEventListener('contextmenu', e=>e.preventDefault());
    document.addEventListener('selectstart', e=>e.preventDefault());
    document.addEventListener('keydown', e=>{ if(e.ctrlKey||e.metaKey){ const blocked=['c','x','v','s','u','p']; if(blocked.includes(e.key.toLowerCase())) e.preventDefault(); } });

    // ======= ملاحظات أمنية ونهاية =======
    // - هذا لا يمنع النسخ عبر أدوات المطور (DevTools) أو أخذ سكرينشوت أو قراءة السيرفر.
    // - بعض المتصفحات أو إضافات الأمان قد تمنع الاستبدال المتكرر للمسار، أو تتصرف بشكل غير متوقع.
    // - لا تستخدم تكرار سريع جداً لأن ذلك قد يزعج المستخدمين ويبدو مشبوهًا.
  </script>
</body>
</html>
